var R=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var l=(t,e,n)=>(R(t,e,"read from private field"),n?n.call(t):e.get(t)),u=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},d=(t,e,n,s)=>(R(t,e,"write to private field"),s?s.call(t,n):e.set(t,n),n);import"./modulepreload-polyfill-3cfb730f.js";function p(t){return document.querySelector(t)}var g,w,E,A;class I{constructor(e,n,s,a){u(this,g,void 0);u(this,w,void 0);u(this,E,void 0);u(this,A,void 0);d(this,g,e),d(this,w,n),d(this,E,s),d(this,A,a)}get count(){return l(this,g)}get category(){return l(this,w)}get difficulty(){return l(this,E)}get type(){return l(this,A)}}g=new WeakMap,w=new WeakMap,E=new WeakMap,A=new WeakMap;var b,L,v,C;class M{constructor(e,n,s,a){u(this,b,void 0);u(this,L,void 0);u(this,v,void 0);u(this,C,void 0);d(this,b,e),d(this,L,n),d(this,v,s),d(this,C,a)}get question(){return l(this,b)}get options(){return l(this,L)}get correctAnswer(){return l(this,v)}get type(){return l(this,C)}}b=new WeakMap,L=new WeakMap,v=new WeakMap,C=new WeakMap;const D=p("#quiz-form");new Array;D.addEventListener("submit",t=>{t.preventDefault(),N()});async function N(){const t=D.elements,e=parseInt(t.count.value),n=t.category.value,s=t.difficulty.value,a=t.type.value,Q=new I(e,n,s,a),x=p(".loading");D.hidden=!0,x.hidden=!1;const $=U(Q),k=await j($);x.hidden=!0,T(k)}function T(t){const e=new Array;let n=0,s=0;for(const o of t){const i=atob(o.question),h=atob(o.correct_answer),r=[o.correct_answer,...o.incorrect_answers].map(atob);r.sort(()=>Math.random()-.5);const m=atob(o.type),y=new M(i,r,h,m);e.push(y)}console.log(e),a(e[n],n,null);function a(o,i,h){const r=p("#questions-placeholder");r.innerHTML="",r.hidden=!1;const m=Q(o,i,h);r.appendChild(m)}function Q(o,i,h){const r=document.createElement("article"),m=document.createElement("h3");m.textContent=`${i+1}/${e.length}. ${o.question}`;const y=document.createElement("div");y.classList.add("options");let q=h,_=h==o.correctAnswer;const H=n===t.length-1;for(const c of o.options){const f=document.createElement("button");f.classList.add("option"),q&&c==o.correctAnswer&&f.classList.add("correct"),q&&!_&&c==h&&f.classList.add("wrong"),q&&(f.disabled=!0),f.textContent=c,f.onclick=B=>x(c,c==o.correctAnswer),y.appendChild(f)}const z=document.createElement("nav"),P=document.createElement("button");if(P.classList.add("btn"),P.textContent="Finish",P.addEventListener("click",k),z.appendChild(P),q&&!H){const c=document.createElement("button");c.classList.add("btn"),c.textContent="Next",c.addEventListener("click",$),z.appendChild(c)}return r.append(m,y,z),r}function x(o,i){a(e[n],n,o),i&&++s}function $(){++n,a(e[n],n,null,n===t.length-2)}function k(){const o=p("#questions-placeholder"),i=p("#play-again");o.hidden=!0,i.hidden=!1,p("#play-again-btn").addEventListener("click",F),p("#score").textContent=`You scored ${s} out of ${e.length}`}function F(){const o=p("#play-again");o.hidden=!0,p("#quiz-form").hidden=!1}}function U(t){const e=new URL("https://opentdb.com/api.php");return e.searchParams.append("amount",t.count),t.category!=="any"&&e.searchParams.append("category",t.category),t.difficulty!=="any"&&e.searchParams.append("difficulty",t.difficulty),t.type!=="any"&&e.searchParams.append("type",t.type),e.searchParams.append("encode","base64"),e.href}async function j(t){return(await(await fetch(t)).json()).results}
